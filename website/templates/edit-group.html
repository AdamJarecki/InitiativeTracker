{% extends "base.html" %}

{% block title %}Initiative Tracker Edit Group{% endblock %}

{% block content %}

<h1></h1>
<h1 align="center">Come here to edit your groups!</h1>
<h3 align='center'>Select the group you'd like to edit.</h1>
<br><br>

<div align='center'>
<form id="groupForm">
    <select name="group" id="groupSelect">
        {% for group in groups %}
            <option value="{{ group.id }}">{{ group.group_name }}</option>
        {% endfor %}
    </select>
</form>
</div>


<div id="playersList">

</div>



<script>
    document.getElementById('groupSelect').addEventListener('change', function() {
        var groupId = this.value; // Get the selected group's ID
        fetch(`/get-characters?group_id=${groupId}`) // Make a request to the Flask route
            .then(response => response.json())
            .then(data => {
                var charactersList = document.getElementById('characters'); // Ensure this is the ID of your element for displaying characters
                charactersList.innerHTML = ''; // Clear existing characters
                data.characters.forEach(character => { // Iterate over the characters returned from the Flask route
                    var li = document.createElement('li');
                    li.textContent = character.character_name;
                    charactersList.appendChild(li); // Add the character to the list
                });
            }).catch(error => console.error('Error:', error)); // Catch and log any errors
    });
</script>



{% endblock %}